<style>
    :root {
        --rael-blue: #0054a6;
        --rael-gold: #ffd700;
        --new-year-color: #fff9c4;
        --sunday-red: #e74c3c;
        --saturday-blue: #3498db;
        --border-color: #eee;
    }

    .rael-cal-wrapper {
        width: 100%;
        max-width: 500px; /* 너무 퍼지지 않게 적정 너비 설정 */
        margin: 20px auto;
        font-family: 'Pretendard', -apple-system, sans-serif;
        border: 1px solid var(--border-color);
        border-radius: 12px;
        box-shadow: 0 10px 30px rgba(0,0,0,0.08);
        overflow: hidden;
        background: #fff;
    }

    /* 헤더 영역 */
    .rael-cal-header {
        background: var(--rael-blue);
        color: white;
        padding: 24px 15px;
        text-align: center;
    }

    .ah-title { font-size: 1.6rem; font-weight: 800; margin: 0; letter-spacing: -0.5px; }
    .std-date { font-size: 0.85rem; opacity: 0.85; margin-top: 6px; font-weight: 300; }

    /* 컨트롤바 */
    .cal-controls {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 15px 20px;
        background: #fff;
        border-bottom: 1px solid var(--border-color);
    }

    .btn-move {
        background: #f4f4f4; border: none; width: 32px; height: 32px;
        border-radius: 50%; cursor: pointer; font-size: 0.9rem;
        transition: background 0.2s; display: flex; align-items: center; justify-content: center;
    }
    .btn-move:hover { background: #e0e0e0; }
    #cal-month-title { font-weight: 700; font-size: 1.1rem; color: #333; }

    /* 달력 그리드 */
    .cal-grid {
        display: grid;
        grid-template-columns: repeat(7, 1fr);
    }

    .cal-day-label {
        text-align: center; padding: 12px 0;
        font-weight: 600; font-size: 0.75rem;
        color: #888; text-transform: uppercase;
        border-bottom: 1px solid var(--border-color);
    }

    .cal-date-cell {
        min-height: 70px; height: auto; padding: 6px;
        border-right: 1px solid #fcfcfc;
        border-bottom: 1px solid #fcfcfc;
        position: relative;
        box-sizing: border-box;
    }

    .date-num { font-size: 0.9rem; font-weight: 500; margin-bottom: 4px; display: inline-block; }

    /* 주말 색상 */
    .cal-day-label:nth-child(1), .date-sun .date-num { color: var(--sunday-red); }
    .cal-day-label:nth-child(7), .date-sat .date-num { color: var(--saturday-blue); }

    /* 상태 강조 */
    .is-newyear { background-color: var(--new-year-color); }
    .is-holiday { background-color: #f8fbff; }
    .is-today { box-shadow: inset 0 0 0 2px var(--rael-blue); border-radius: 4px; }

    /* 태그 스타일 */
    .holiday-tag {
        font-size: 0.6rem;
        background: var(--rael-blue);
        color: white;
        padding: 2px 5px;
        border-radius: 4px;
        display: block;
        margin-top: 2px;
        text-align: center;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
    }

    .newyear-tag { background: #e67e22; font-weight: bold; }
    
    /* 이벤트 텍스트 (숨김 처리 유지) */
    .ev-important { display: none; }
    .event-item { font-size: 0.6rem; color: #666; margin-top: 1px; }

    /* 모바일 대응 */
    @media (max-width: 400px) {
        .cal-date-cell { min-height: 60px; padding: 4px; }
        .date-num { font-size: 0.8rem; }
        .holiday-tag { font-size: 0.55rem; padding: 1px 2px; }
    }
</style>

<div class="rael-cal-wrapper">
    <div class="rael-cal-header">
        <h1 id="ah-title" class="ah-title">AH --</h1>
        <div id="std-date" class="std-date">0000. 00. 00</div>
    </div>

    <div class="cal-controls">
        <button class="btn-move" onclick="moveMonth(-1)">❮</button>
        <strong id="cal-month-title">2026. 02</strong>
        <button class="btn-move" onclick="moveMonth(1)">❯</button>
    </div>

    <div class="cal-grid" id="cal-grid"></div>
</div>
<script src="https://tistory1.daumcdn.net/tistory/2253645/skin/images/raelinfo-calendar-2026-02-09.js"></script>
<script>
    // 데이터가 없는 경우를 위한 빈 배열 처리
    const fullData = (typeof calendar_data !== 'undefined') ? calendar_data : [];
    let viewDate = new Date(); 

    function getFirstSundayOfApril(year) {
        let d = new Date(year, 3, 1);
        while(d.getDay() !== 0) d.setDate(d.getDate() + 1);
        return d.getDate();
    }

    function render() {
        const year = viewDate.getFullYear();
        const month = viewDate.getMonth();
        const today = new Date();

        // 1. AH 연도 계산 (8월 6일 기준)
        let ahYear = today.getFullYear() - 1945;
        if (today.getMonth() < 7 || (today.getMonth() === 7 && today.getDate() < 6)) ahYear--;
        document.getElementById('ah-title').innerText = `AH ${ahYear}`;
        
        document.getElementById('std-date').innerText = `${today.getFullYear()}년 ${today.getMonth()+1}월 ${today.getDate()}일 (표준력)`;
        document.getElementById('cal-month-title').innerText = `${year}. ${String(month + 1).padStart(2, '0')}`;

        const grid = document.getElementById('cal-grid');
        grid.innerHTML = '';

        // 요일 헤더
        ['Sun','Mon','Tue','Wed','Thu','Fri','Sat'].forEach(d => {
            grid.innerHTML += `<div class="cal-day-label">${d}</div>`;
        });

        const firstDay = new Date(year, month, 1).getDay();
        const lastDate = new Date(year, month + 1, 0).getDate();

        // 빈칸
        for(let i=0; i<firstDay; i++) grid.innerHTML += `<div class="cal-date-cell"></div>`;

        // 날짜 생성
        for(let d=1; d<=lastDate; d++) {
            let classes = ['cal-date-cell'];
            let tags = '';
            const currentLoopDate = new Date(year, month, d);
            const dayOfWeek = currentLoopDate.getDay();
            const dateStr = `${year}-${String(month+1).padStart(2,'0')}-${String(d).padStart(2,'0')}`;

            if(dayOfWeek === 0) classes.push('date-sun');
            if(dayOfWeek === 6) classes.push('date-sat');
            if(year === today.getFullYear() && month === today.getMonth() && d === today.getDate()) classes.push('is-today');

            // 축일 데이터 및 태그 생성
            if(month === 7 && d === 6) {
                classes.push('is-newyear');
                tags += `<span class="holiday-tag newyear-tag">신년 축일</span>`;
            } else if(month === 9 && d === 7) {
                classes.push('is-holiday');
                tags += `<span class="holiday-tag">10.7 축일</span>`;
            } else if(month === 11 && d === 13) {
                classes.push('is-holiday');
                tags += `<span class="holiday-tag">12.13 축일</span>`;
            } else if(month === 3 && d === getFirstSundayOfApril(year)) {
                classes.push('is-holiday');
                tags += `<span class="holiday-tag">4월 축일</span>`;
            }

            // 외부 데이터 매칭
            const dayEvents = fullData.filter(e => e.start === dateStr);
            dayEvents.forEach(e => {
                if(!e.title.includes('축일')) { // 축일 중복 표시 방지
                    tags += `<div class="event-item">${e.title}</div>`;
                }
            });

            grid.innerHTML += `
                <div class="${classes.join(' ')}">
                    <span class="date-num">${d}</span>
                    <div class="tags-container">${tags}</div>
                </div>
            `;
        }
    }

    function moveMonth(diff) {
        viewDate.setMonth(viewDate.getMonth() + diff);
        render();
    }

    render();
</script>
